<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UniClub Officer Dashboard</title>
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
      <div class="menu-toggle" id="menuToggle">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
      </div>
      <a href="#" class="active"
        ><i class="ri-dashboard-line"></i> <span>Dashboard</span></a
      >
      <a href="#" id="sidebarMemberApprovals"
        ><i class="ri-user-add-line"></i> <span>Member Approvals</span></a
      >
      <a href="#"
        ><i class="ri-calendar-check-line"></i> <span>Attendance</span></a
      >
      <a href="#"><i class="ri-team-line"></i> <span>Club Records</span></a>
      <a href="#"
        ><i class="ri-user-star-line"></i> <span>Officer Roles</span></a
      >
      <a href="#"
        ><i class="ri-bar-chart-box-line"></i> <span>Analytics</span></a
      >
      <a href="#"
        ><i class="ri-notification-3-line"></i> <span>Communication</span></a
      >
    </div>

    <!-- Main -->
    <div class="main">
      <div class="topbar">
        <h1>Officer Dashboard</h1>
        <div class="topbar-right">
          <div class="notif" id="notifBtn" style="position: relative">
            <i class="ri-notification-2-line"></i>
            <span id="notifCount">3</span>
            <div
              id="notifDropdown"
              style="
                display: none;
                position: absolute;
                right: 0;
                top: 40px;
                background: #fff;
                box-shadow: 0 8px 24px rgba(0, 0, 0, 0.18);
                border-radius: 12px;
                min-width: 320px;
                z-index: 100;
                border: 1px solid #e5e7eb;
              "
            >
              <div
                style="
                  padding: 16px 20px;
                  border-bottom: 1px solid #f0f0f0;
                  font-weight: 600;
                  font-size: 17px;
                  color: #222;
                  display: flex;
                  align-items: center;
                  gap: 8px;
                "
              >
                <i
                  class="ri-notification-3-line"
                  style="font-size: 20px; color: #8e0e00"
                ></i>
                Announcements
              </div>
              <ul
                id="notifAnnouncements"
                style="
                  list-style: none;
                  margin: 0;
                  padding: 0;
                  max-height: 320px;
                  overflow-y: auto;
                "
              ></ul>
              <div
                style="
                  padding: 12px;
                  text-align: center;
                  font-size: 13px;
                  color: #aaa;
                  border-top: 1px solid #f0f0f0;
                  background: #fafbfc;
                  border-radius: 0 0 12px 12px;
                "
              >
                No more announcements
              </div>
            </div>
          </div>
          <script>
            // ...existing code...
            // Notification dropdown logic
            const notifBtn = document.getElementById("notifBtn");
            const notifDropdown = document.getElementById("notifDropdown");
            const notifAnnouncements =
              document.getElementById("notifAnnouncements");

            // Example announcements (can be replaced with dynamic data)
            const announcements = [
              {
                title: "General Assembly",
                message: "Assembly on Sept 15, 2025 at 2PM.",
              },
              {
                title: "Leadership Training",
                message: "Training on Sept 22, 2025.",
              },
              {
                title: "New Club Applications",
                message: "Review pending club applications.",
              },
            ];

            function renderAnnouncements() {
              notifAnnouncements.innerHTML = "";
              if (announcements.length === 0) {
                notifAnnouncements.innerHTML =
                  '<li style="padding:24px; text-align:center; color:#888;">No announcements</li>';
                return;
              }
              announcements.forEach((a) => {
                const li = document.createElement("li");
                li.style.padding = "16px 20px";
                li.style.borderBottom = "1px solid #f0f0f0";
                li.style.transition = "background 0.2s";
                li.style.cursor = "pointer";
                li.onmouseover = () => (li.style.background = "#f6f8fa");
                li.onmouseout = () => (li.style.background = "");
                li.innerHTML = `
              <div style='display:flex; align-items:center; gap:12px;'>
                <div style='background:#8e0e00; color:#fff; border-radius:50%; width:32px; height:32px; display:flex; align-items:center; justify-content:center; font-size:18px;'>
                  <i class='ri-megaphone-line'></i>
                </div>
                <div style='flex:1;'>
                  <div style='font-weight:500; font-size:15px; color:#222;'>${a.title}</div>
                  <div style='font-size:13px; color:#555; margin-top:2px;'>${a.message}</div>
                </div>
              </div>
            `;
                notifAnnouncements.appendChild(li);
              });
            }

            notifBtn.addEventListener("click", (e) => {
              e.stopPropagation();
              renderAnnouncements();
              notifDropdown.style.display =
                notifDropdown.style.display === "none" ? "block" : "none";
            });

            // Hide dropdown when clicking outside
            document.addEventListener("click", (e) => {
              if (!notifBtn.contains(e.target)) {
                notifDropdown.style.display = "none";
              }
            });
            // ...existing code...
          </script>
          <div class="profile">
            <img src="https://i.pravatar.cc/50" alt="Profile" />
            <span>Officer</span>
          </div>
        </div>
      </div>

      <div class="card-grid" id="cardGrid">
        <div class="card">
          <h3>Pending Memberships</h3>
          <p id="membershipText">3 new applications awaiting approval.</p>
          <button class="btn" onclick="openMembershipModal()">Review</button>
        </div>
        <!-- Calendar Card -->
        <div class="card">
          <h3>Events Calendar</h3>
          <div id="calendar"></div>
        </div>
        <div class="card">
          <h3>Analytics</h3>
          <canvas id="analyticsChart"></canvas>
          <button class="btn" onclick="refreshChart()">Refresh Data</button>
        </div>
        <div class="card">
          <h3>Communication</h3>
          <p id="commStatus">Post announcements or event reminders.</p>
          <button class="btn" onclick="createPost()">Create Post</button>
          <ul id="postList"></ul>
        </div>
      </div>
    </div>

    <!-- Modal for Membership Approval -->
    <div class="modal" id="membershipModal">
      <div class="modal-content">
        <span class="close-btn" onclick="closeMembershipModal()">✖</span>
        <h3>Membership Approvals</h3>

        <div class="member-toolbar">
          <div class="member-left">
            <label class="visually-hidden" for="memberSearch"
              >Search applicant</label
            >
            <input
              id="memberSearch"
              type="text"
              placeholder="Search by name or club..."
            />
          </div>
          <div class="member-right">
            <span class="pill"
              >Pending: <strong id="pendingCount">3</strong></span
            >
            <span class="pill green"
              >Approved: <strong id="approvedCountTop">0</strong></span
            >
            <span class="pill red"
              >Rejected: <strong id="rejectedCountTop">0</strong></span
            >
          </div>
        </div>

        <div class="member-tabs">
          <button class="tab-btn active" data-tab="pendingTab">Pending</button>
          <button class="tab-btn" data-tab="approvedTab">Approved</button>
          <button class="tab-btn" data-tab="rejectedTab">Rejected</button>
        </div>

        <div class="approval-sections">
          <!-- Pending List -->
          <div class="tab-pane" id="pendingTab">
            <div class="approval-card">
              <h4>
                Pending Applications (<span id="pendingCountHeader">3</span>)
              </h4>
              <div class="table-wrap">
                <table id="pendingTable">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Applying For</th>
                      <th>Current Clubs</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr data-clubs="2">
                      <td>Juan Dela Cruz</td>
                      <td>Math Club</td>
                      <td><span class="badge">2</span></td>
                      <td>
                        <button class="approve" onclick="approveStudent(this)">
                          <i class="ri-check-line"></i> Approve
                        </button>
                        <button class="reject" onclick="rejectStudent(this)">
                          <i class="ri-close-line"></i> Reject
                        </button>
                      </td>
                    </tr>
                    <tr data-clubs="1">
                      <td>Maria Santos</td>
                      <td>Physics Club</td>
                      <td><span class="badge">1</span></td>
                      <td>
                        <button class="approve" onclick="approveStudent(this)">
                          <i class="ri-check-line"></i> Approve
                        </button>
                        <button class="reject" onclick="rejectStudent(this)">
                          <i class="ri-close-line"></i> Reject
                        </button>
                      </td>
                    </tr>
                    <tr data-clubs="3">
                      <td>Carlos Reyes</td>
                      <td>Science & Math Club</td>
                      <td><span class="badge">3</span></td>
                      <td>
                        <button class="approve" onclick="approveStudent(this)">
                          <i class="ri-check-line"></i> Approve
                        </button>
                        <button class="reject" onclick="rejectStudent(this)">
                          <i class="ri-close-line"></i> Reject
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Approved List -->
          <div class="tab-pane" id="approvedTab" style="display: none">
            <div class="approval-card approved">
              <h4>Approved Members (<span id="approvedCount">0</span>)</h4>
              <div class="table-wrap">
                <table id="approvedTable">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Club</th>
                      <th>Current Clubs</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Rejected List -->
          <div class="tab-pane" id="rejectedTab" style="display: none">
            <div class="approval-card rejected">
              <h4>Rejected Members (<span id="rejectedCount">0</span>)</h4>
              <div class="table-wrap">
                <table id="rejectedTable">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Club</th>
                      <th>Current Clubs</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal for Attendance Management -->
    <div class="modal" id="attendanceModal">
      <div class="modal-content">
        <span class="close-btn" onclick="closeAttendanceModal()">✖</span>
        <h3>Attendance Management – General Assembly</h3>

        <div id="attendanceSummary">
          Present: <span id="presentCount">0</span> | Absent:
          <span id="absentCount">0</span>
        </div>

        <div class="attn-toolbar">
          <div class="attn-left">
            <label class="visually-hidden" for="attnSearch"
              >Search attendee</label
            >
            <input
              id="attnSearch"
              type="text"
              placeholder="Search attendee..."
            />
            <label class="visually-hidden" for="attnFilter"
              >Filter status</label
            >
            <select id="attnFilter">
              <option value="all">All</option>
              <option value="present">Present</option>
              <option value="absent">Absent</option>
              <option value="not_marked">Not Marked</option>
            </select>
          </div>
          <div class="attn-right">
            <button
              id="attnExport"
              class="btn btn-light"
              type="button"
              aria-label="Export attendance to CSV"
            >
              <i class="ri-download-2-line"></i> Export
            </button>
          </div>
        </div>

        <div class="table-wrap">
          <table id="attendanceTable">
            <thead>
              <tr>
                <th>Name</th>
                <th>Status</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Juan Dela Cruz</td>
                <td class="status">Not Marked</td>
                <td>
                  <button class="approve" onclick="markPresent(this)">
                    <i class="ri-checkbox-circle-line"></i> Present
                  </button>
                  <button class="reject" onclick="markAbsent(this)">
                    <i class="ri-close-circle-line"></i> Absent
                  </button>
                </td>
              </tr>
              <tr>
                <td>Maria Santos</td>
                <td class="status">Not Marked</td>
                <td>
                  <button class="approve" onclick="markPresent(this)">
                    <i class="ri-checkbox-circle-line"></i> Present
                  </button>
                  <button class="reject" onclick="markAbsent(this)">
                    <i class="ri-close-circle-line"></i> Absent
                  </button>
                </td>
              </tr>
              <tr>
                <td>Carlos Reyes</td>
                <td class="status">Not Marked</td>
                <td>
                  <button class="approve" onclick="markPresent(this)">
                    <i class="ri-checkbox-circle-line"></i> Present
                  </button>
                  <button class="reject" onclick="markAbsent(this)">
                    <i class="ri-close-circle-line"></i> Absent
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Modal for Create Post -->
    <div class="modal" id="postModal">
      <div class="modal-content">
        <span
          class="close"
          onclick="document.getElementById('postModal').style.display='none'"
          >&times;</span
        >
        <h3>Create Announcement / Post</h3>

        <form id="postForm">
          <div class="form-group">
            <label for="postTitle">Title</label>
            <input
              type="text"
              id="postTitle"
              placeholder="Enter post title"
              required
            />
          </div>

          <div class="form-group">
            <label for="postMessage">Message</label>
            <textarea
              id="postMessage"
              rows="5"
              placeholder="Write your announcement here..."
              required
            ></textarea>
          </div>

          <div class="form-group">
            <label for="postAudience">Audience</label>
            <select id="postAudience" required>
              <option value="">-- Select Audience --</option>
              <option value="all">All Members</option>
              <option value="officers">Officers Only</option>
              <option value="applicants">Applicants</option>
            </select>
          </div>

          <button type="submit" class="btn">Post Announcement</button>
        </form>
      </div>
    </div>

    <script src="officerManagement.js"></script>
  </body>
</html>
